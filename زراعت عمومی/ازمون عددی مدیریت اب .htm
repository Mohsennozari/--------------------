<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>آزمون مدیریت آب و آبیاری</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .progress-bar {
      width: 100%;
      height: 10px;
      background-color: #e5e7eb;
      border-radius: 5px;
      overflow: hidden;
    }
    .progress {
      height: 100%;
      background-color: #3b82f6;
      transition: width 0.15s linear;
    }
  </style>
</head>
<body class="bg-gray-100 font-sans leading-relaxed">
  <div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold text-center text-blue-800 mb-8">آزمون مدیریت آب و آبیاری در مزرعه</h1>
    <div id="quiz-container" class="bg-white p-6 rounded-lg shadow-md">
      <div id="timer" class="mb-4">
        <p class="text-lg font-semibold">زمان باقی‌مانده: <span id="time-left">15</span> ثانیه</p>
        <div class="progress-bar">
          <div id="progress" class="progress"></div>
        </div>
      </div>
      <h2 id="question" class="text-xl font-semibold mb-4"></h2>
      <div id="options" class="grid grid-cols-1 gap-2 md:grid-cols-2"></div>
      <p class="mt-4 text-lg">سوال <span id="question-number">1</span> از 20</p>
      <p class="mt-2 text-lg">امتیاز: <span id="score">0</span></p>
    </div>
    <div id="result" class="hidden mt-6 text-center">
      <h2 class="text-2xl font-bold text-blue-800">نتیجه آزمون</h2>
      <p class="text-lg">امتیاز شما: <span id="final-score"></span> از 20</p>
      <button onclick="restartQuiz()" class="mt-4 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700">شروع مجدد</button>
    </div>
  </div>

  <script>
    const questions = [
      { question: "چرخه آب در طبیعت تا چه ارتفاعی در بالای سطح زمین جابجا می‌شود؟", options: ["10 کیلومتر", "15 کیلومتر", "20 کیلومتر", "12 کیلومتر"], answer: "15 کیلومتر" },
      { question: "چرخه آب در طبیعت تا چه عمقی زیر زمین جابجا می‌شود؟", options: ["1 کیلومتر", "2 کیلومتر", "3 کیلومتر", "0.5 کیلومتر"], answer: "1 کیلومتر" },
      { question: "آب سهل الوصول تقریباً چند درصد از کل آب قابل دسترس گیاه را تشکیل می‌دهد؟", options: ["50%", "75%", "60%", "80%"], answer: "75%" },
      { question: "حداقل راندمان کلی سیستم آبیاری که بیانگر عملکرد خوب است، چند درصد است؟", options: ["30%", "40%", "50%", "20%"], answer: "40%" },
      { question: "حداکثر راندمان کلی سیستم آبیاری که بیانگر عملکرد خوب است، چند درصد است؟", options: ["40%", "50%", "60%", "30%"], answer: "50%" },
      { question: "راندمان پایین سیستم آبیاری در چه محدوده درصدی شروع می‌شود؟", options: ["10%", "20%", "30%", "15%"], answer: "20%" },
      { question: "راندمان پایین سیستم آبیاری تا چند درصد ادامه دارد؟", options: ["20%", "25%", "30%", "35%"], answer: "30%" },
      { question: "چند نوع نیروی اصلی در پتانسیل آب خاک وجود دارد؟", options: ["2", "3", "4", "5"], answer: "4" },
      { question: "چند روش اصلی برای آبیاری غرقابی ذکر شده است؟", options: ["2", "3", "4", "5"], answer: "3" },
      { question: "چند عامل اصلی بر نیاز آبی گیاه تأثیر می‌گذارند؟", options: ["2", "3", "4", "5"], answer: "4" },
      { question: "چند محدودیت اصلی برای آبیاری سطحی در متن ذکر شده است؟", options: ["2", "3", "4", "5"], answer: "4" },
      { question: "چند عیب اصلی برای آبیاری سطحی در متن ذکر شده است؟", options: ["1", "2", "3", "4"], answer: "3" },
      { question: "چند مزیت اصلی برای آبیاری قطره‌ای در متن ذکر شده است؟", options: ["1", "2", "3", "4"], answer: "2" },
      { question: "چند محدودیت برای آبیاری قطره‌ای در متن ذکر شده است؟", options: ["1", "2", "3", "4"], answer: "2" },
      { question: "چند مشکل رایج برای آبیاری قطره‌ای در متن ذکر شده است؟", options: ["1", "2", "3", "4"], answer: "1" },
      { question: "در چرخه آب، کل محدوده جابجایی آب (زیر زمین و بالای زمین) چند کیلومتر است؟", options: ["12 کیلومتر", "14 کیلومتر", "16 کیلومتر", "18 کیلومتر"], answer: "16 کیلومتر" },
      { question: "چند نوع منبع آب برای آبیاری در مناطق مختلف (مرطوب و خشک) ذکر شده است؟", options: ["1", "2", "3", "4"], answer: "3" },
      { question: "در تعریف پتانسیل آب خاک، چند نوع نیروی خاص نام برده شده است؟", options: ["2", "3", "4", "5"], answer: "4" },
      { question: "راندمان پایین سیستم آبیاری از چند درصد شروع می‌شود؟", options: ["10%", "15%", "20%", "25%"], answer: "20%" },
      { question: "چند تعریف در هر جدول از جداول ارائه‌شده وجود دارد؟", options: ["2", "3", "4", "5"], answer: "3" }
    ];

    let currentQuestion = 0;
    let score = 0;
    let timeLeft = 15;
    let timerId;

    const questionElement = document.getElementById('question');
    const optionsElement = document.getElementById('options');
    const timeLeftElement = document.getElementById('time-left');
    const progressElement = document.getElementById('progress');
    const questionNumberElement = document.getElementById('question-number');
    const scoreElement = document.getElementById('score');
    const quizContainer = document.getElementById('quiz-container');
    const resultContainer = document.getElementById('result');
    const finalScoreElement = document.getElementById('final-score');

    function startTimer() {
      timeLeft = 15;
      timeLeftElement.textContent = timeLeft;
      progressElement.style.width = '100%';
      timerId = setInterval(() => {
        timeLeft -= 0.15;
        timeLeftElement.textContent = Math.ceil(timeLeft);
        progressElement.style.width = `${(timeLeft / 15) * 100}%`;
        if (timeLeft <= 0) {
          clearInterval(timerId);
          nextQuestion();
        }
      }, 150);
    }

    function displayQuestion() {
      if (currentQuestion >= questions.length) {
        endQuiz();
        return;
      }
      const q = questions[currentQuestion];
      questionElement.textContent = q.question;
      optionsElement.innerHTML = '';
      q.options.forEach(option => {
        const button = document.createElement('button');
        button.className = 'w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition duration-200';
        button.textContent = option;
        button.onclick = () => checkAnswer(option);
        optionsElement.appendChild(button);
      });
      questionNumberElement.textContent = currentQuestion + 1;
      startTimer();
    }

    function checkAnswer(selected) {
      clearInterval(timerId);
      if (selected === questions[currentQuestion].answer) {
        score++;
        scoreElement.textContent = score;
      }
      nextQuestion();
    }

    function nextQuestion() {
      currentQuestion++;
      if (currentQuestion < questions.length) {
        displayQuestion();
      } else {
        endQuiz();
      }
    }

    function endQuiz() {
      quizContainer.classList.add('hidden');
      resultContainer.classList.remove('hidden');
      finalScoreElement.textContent = score;
    }

    function restartQuiz() {
      currentQuestion = 0;
      score = 0;
      scoreElement.textContent = score;
      quizContainer.classList.remove('hidden');
      resultContainer.classList.add('hidden');
      displayQuestion();
    }

    displayQuestion();
  </script>
</body>
</html>