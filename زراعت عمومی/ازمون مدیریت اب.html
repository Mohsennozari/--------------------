<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>یادگیری تعاریف و سوالات صحیح/غلط مدیریت آب و آبیاری</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { 
            font-family: 'Vazir', sans-serif; 
            background: linear-gradient(to bottom, #e0f7fa, #ffffff); 
        }
        .card {
            background: linear-gradient(to bottom, #f1f8e9, #dcedc8);
            border: 2px solid #4caf50;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s, opacity 0.3s;
        }
        .card:hover {
            transform: scale(1.02);
        }
        #water-container {
            width: 50px;
            height: 200px;
            border: 2px solid #0288d1;
            border-radius: 0 0 10px 10px;
            overflow: hidden;
            position: relative;
            background: #e3f2fd;
            margin: 0 auto 20px;
        }
        #water-level {
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #2196f3, #0d47a1);
            transition: height 1s linear;
            position: absolute;
            bottom: 0;
        }
        canvas { 
            position: fixed; 
            top: 0; 
            left: 0; 
            pointer-events: none; 
            z-index: 10; 
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">
    <div class="max-w-4xl w-full bg-white shadow-lg rounded-lg p-8">
        <h1 class="text-3xl font-bold text-center mb-8 text-blue-600">یادگیری تعاریف و سوالات صحیح/غلط مدیریت آب و آبیاری</h1>
        <p class="text-center mb-6 text-gray-600">این صفحه شامل ۳۰ کارت تعریف (هر کدام ۳۰ ثانیه) و سپس ۳۰ سوال صحیح/غلط (هر کدام ۵ ثانیه) است. پس از آن، ۱۵ کارت تعریف و ۴۵ سوال صحیح/غلط دیگر نمایش داده می‌شود.</p>
        
        <div id="water-container">
            <div id="water-level"></div>
        </div>
        
        <div id="card-container" class="text-center"></div>
    </div>

    <canvas id="confetti-canvas" width="100%" height="100%"></canvas>

    <script>
        const definitions = [
            // ۳۰ تعریف
            "آبیاری عبارت است از رساندن آب کافی به خاک دارای محدودیت رطوبت که قادر به تأمین آب مورد نیاز برای رشد گیاه نباشد.",
            "آبیاری تکمیلی زمانی انجام می‌شود که باران قادر به تأمین نیاز آبی گیاه نباشد.",
            "آبیاری کامل زمانی کاربرد دارد که آب به مقدار کافی در اختیار باشد و امکان توسعه سطح زیرکشت نباشد.",
            "چرخه آب در طبیعت به طور کلی در محدوده ۱۶ کیلومتری (یک کیلومتر زیر زمین و ۱۵ کیلومتر بالا) جابجا می‌شود.",
            "باران عمده‌ترین منبع آب در کره زمین است و بارندگی منبع اصلی آب مورد استفاده در تولیدات کشاورزی به شمار می‌رود.",
            "منابع آب آبیاری بسته به اقلیم مناطق مختلف متفاوت است؛ در مناطق مرطوب بارندگی منبع اصلی و در مناطق خشک ذخیره آب‌های سطحی و زیرزمینی مورد استفاده قرار می‌گیرد.",
            "پتانسیل آب در خاک شامل ماتریک (نیروی جذب توسط ذرات خاک)، اسمزی، ثقلی و فشاری است.",
            "آب ثقلی آبی است که پس از زهکشی از منافذ درشت خاک خارج شده و برای گیاه قابل استفاده نیست.",
            "رطوبت ظرفیت زراعی آبی است که در منافذ ریز خاک نگه داشته می‌شود و برای رشد بسیاری از گیاهان بهینه است.",
            "ظرفیت زراعی حد بالایی رطوبت خاک است که در آن آب برای گیاه قابل دسترس است.",
            "نقطه پژمردگی دائمی (PWP) حد پایین رطوبت خاک است که گیاه دیگر قادر به جذب آب نبوده و پژمرده می‌شود.",
            "آب قابل دسترس گیاه شامل بخشی است که به راحتی در اختیار گیاه قرار می‌گیرد (آب سهل الوصول) و حدود ۷۵ درصد کل آب قابل دسترس است.",
            "نیاز آبی گیاه به میزان آبی گفته می‌شود که محصول در طول دوره رشد مصرف می‌کند.",
            "عوامل مؤثر بر نیاز آبی گیاه شامل عوامل گیاهی، خاکی، اقلیمی و زراعی است.",
            "در شرایط مدیریت یکسان، برخی محصولات از آب موجود به طور کارآمدتری استفاده می‌کنند.",
            "آبیاری سطحی روشی است که در آن آب به وسیله نیروی ثقل در سطح مزرعه جاری می‌شود.",
            "آبیاری غرقابی به روش کرتی، نواری و جوی پشته‌ای تقسیم می‌شود.",
            "آبیاری کرتی روش غرقابی کنترل شده در زمین‌های مسطح است که رواناب ندارد.",
            "محدودیت‌های آبیاری سطحی شامل ناهمواری زمین، شدت نفوذپذیری خاک، نیاز به نیروی کارگری و میزان مصرف آب است.",
            "معایب آبیاری سطحی شامل پخش غیر یکنواخت آب، نیاز نیروی کارگری زیاد و هزینه بالای تسطیح اراضی است.",
            "تولید سله و سختی جوانه‌زنی بذرها از مشکلات آبیاری نواری در خاک‌های با بافت ریز است.",
            "آبیاری بارانی روشی است که آب به صورت قطرات باران مانند از بالا روی مزرعه پخش می‌شود.",
            "آبیاری قطره‌ای روشی است که به وسیله قطره‌چکان‌ها آب به صورت تدریجی و مستقیم به خاک نزدیک ریشه‌ها می‌رسد.",
            "مزایای آبیاری قطره‌ای شامل کاهش مصرف آب و افزایش کارایی استفاده از آب است.",
            "محدودیت آبیاری قطره‌ای شامل حرکت محدود آب در خاک و عدم امکان توسعه ریشه زیاد است.",
            "گرفتگی قطره‌چکان‌ها با املاح و مواد معلق آب از مشکلات رایج آبیاری قطره‌ای است.",
            "آبیاری قطره‌ای برای محصولات متراکم مناسب نیست زیرا آب به تمام گیاهان نمی‌رسد.",
            "راندمان کلی سیستم آبیاری نسبت آبی است که به وسیله گیاه مصرف می‌شود به آب برداشت شده از منبع.",
            "راندمان انتقال آب در کانال‌ها بسته به نوع کانال و طول آن متفاوت است.",
            "راندمان بالای ۴۰ تا ۵۰ درصد در کل مجموعه آبیاری بیانگر راندمان خوب و راندمان ۲۰ تا ۳۰ درصد بیانگر راندمان پایین است."
        ];

        const trueFalseQuestions = [
            { question: "آبیاری تکمیلی همیشه بعد از برداشت انجام می‌شود.", answer: false },
            { question: "آب ثقلی برای گیاه قابل استفاده است.", answer: false },
            { question: "آبیاری قطره‌ای راندمان بالاتری نسبت به آبیاری سطحی دارد.", answer: true },
            { question: "بارندگی منبع اصلی آب در مناطق خشک است.", answer: false },
            { question: "ظرفیت زراعی بهینه‌ترین رطوبت برای رشد گیاه است.", answer: true },
            { question: "نقطه پژمردگی دائمی زمانی است که خاک کاملاً خشک است.", answer: false },
            { question: "آبیاری کرتی رواناب زیادی تولید می‌کند.", answer: false },
            { question: "آبیاری بارانی برای خاک‌های رسی مناسب نیست.", answer: true },
            { question: "گرفتگی قطره‌چکان‌ها در آبیاری قطره‌ای رایج است.", answer: true },
            { question: "راندمان ۲۰ درصد در آبیاری نشان‌دهنده عملکرد خوب است.", answer: false },
            { question: "چرخه آب فقط در سطح زمین رخ می‌دهد.", answer: false },
            { question: "هیدروفیت‌ها به آب زیادی نیاز دارند.", answer: true },
            { question: "زروفیت‌ها در مناطق مرطوب رشد بهتری دارند.", answer: false },
            { question: "آبیاری سطحی نیاز به نیروی کارگری زیادی دارد.", answer: true },
            { question: "آبیاری کامل همیشه به صرفه‌تر از کم‌آبیاری است.", answer: false },
            { question: "پتانسیل آب خاک فقط به دما بستگی دارد.", answer: false },
            { question: "آبیاری جوی پشته‌ای برای گیاهان حساس به آب ایستادگی مناسب است.", answer: true },
            { question: "سله‌سازی در خاک‌های شنی رایج است.", answer: false },
            { question: "آبیاری بارانی باعث صرفه‌جویی در آب می‌شود.", answer: true },
            { question: "همه گیاهان نیاز آبی یکسانی دارند.", answer: false },
            { question: "راندمان انتقال آب در کانال‌های بتنی بالاتر از کانال‌های خاکی است.", answer: true },
            { question: "آبیاری قطره‌ای برای محصولات متراکم مناسب است.", answer: false },
            { question: "نیاز آبی گیاه به عوامل اقلیمی وابسته نیست.", answer: false },
            { question: "آب سهل الوصول حدود ۷۵ درصد آب قابل دسترس است.", answer: true },
            { question: "آبیاری نواری در زمین‌های شیب‌دار به راحتی اجرا می‌شود.", answer: false },
            { question: "مدیریت زمان آبیاری در مرحله گلدهی مهم است.", answer: true },
            { question: "خاک اشباع یعنی خاک خشک است.", answer: false },
            { question: "آبیاری سطحی برای زمین‌های ناهموار راندمان بالایی دارد.", answer: false },
            { question: "عوامل گیاهی بر کارایی مصرف آب اثر می‌گذارند.", answer: true },
            { question: "آبیاری قطره‌ای هزینه اولیه پایینی دارد.", answer: false }
        ];

        const extraDefinitions = [
            "تبخیر و تعرق فرآیند از دست دادن آب از سطح خاک و گیاه است که تحت تأثیر عوامل اقلیمی قرار دارد.",
            "کم‌آبیاری روشی است که در آن آب کمتر از نیاز کامل گیاه تأمین می‌شود تا صرفه‌جویی شود.",
            "آب قابل دسترس گیاه بین ظرفیت زراعی و نقطه پژمردگی دائمی قرار دارد.",
            "مدیریت آبیاری شامل تنظیم زمان و مقدار آبیاری بر اساس نیاز گیاه و شرایط خاک است.",
            "آبیاری نواری برای خاک‌های با بافت ریز ممکن است باعث سله‌سازی شود.",
            "کانال‌های بتنی راندمان انتقال آب بالاتری نسبت به کانال‌های خاکی دارند.",
            "گیاهان زروفیت با ریشه‌های عمیق و برگ‌های کوچک سازگار با خشکی هستند.",
            "آبیاری بارانی می‌تواند دمای خاک را کنترل کرده و علف‌های هرز را کاهش دهد.",
            "پتانسیل اسمزی خاک به دلیل وجود املاح محلول در آب کاهش می‌یابد.",
            "مرحله گلدهی گیاه حساس‌ترین مرحله به تنش خشکی است.",
            "آبیاری قطره‌ای امکان استفاده دقیق از کود را فراهم می‌کند.",
            "خاک‌های شنی آب کمتری نسبت به خاک‌های رسی نگه می‌دارند.",
            "راندمان آبیاری به نوع سیستم، خاک و مدیریت بستگی دارد.",
            "آبیاری سطحی در زمین‌های مسطح کارایی بیشتری دارد.",
            "نیاز آبی گیاه در مراحل مختلف رشد متفاوت است."
        ];

        const extraTrueFalseQuestions = [
            { question: "تبخیر و تعرق فقط به دما بستگی دارد.", answer: false },
            { question: "کم‌آبیاری می‌تواند عملکرد گیاه را کاهش دهد.", answer: true },
            { question: "آب قابل دسترس بین ظرفیت زراعی و نقطه پژمردگی دائمی قرار دارد.", answer: true },
            { question: "مدیریت آبیاری تأثیری بر راندمان ندارد.", answer: false },
            { question: "آبیاری نواری در خاک‌های شنی سله‌سازی ایجاد می‌کند.", answer: false },
            { question: "کانال‌های بتنی نشت کمتری نسبت به کانال‌های خاکی دارند.", answer: true },
            { question: "زروفیت‌ها برای مناطق مرطوب مناسب هستند.", answer: false },
            { question: "آبیاری بارانی می‌تواند علف‌های هرز را کنترل کند.", answer: true },
            { question: "پتانسیل اسمزی خاک با افزایش املاح کاهش می‌یابد.", answer: true },
            { question: "مرحله گلدهی به تنش خشکی مقاوم است.", answer: false },
            { question: "آبیاری قطره‌ای امکان کوددهی دقیق را فراهم می‌کند.", answer: true },
            { question: "خاک‌های رسی آب بیشتری نسبت به خاک‌های شنی نگه می‌دارند.", answer: true },
            { question: "راندمان آبیاری به نوع خاک وابسته نیست.", answer: false },
            { question: "آبیاری سطحی در زمین‌های ناهموار کارایی خوبی دارد.", answer: false },
            { question: "نیاز آبی گیاه در مرحله رسیدگی بالاست.", answer: false },
            { question: "آبیاری قطره‌ای برای گیاهان با ریشه عمیق مناسب است.", answer: true },
            { question: "همه خاک‌ها ظرفیت زراعی یکسانی دارند.", answer: false },
            { question: "آبیاری بارانی در خاک‌های رسی باعث سله‌سازی می‌شود.", answer: true },
            { question: "چرخه آب شامل حرکت آب در اتمسفر است.", answer: true },
            { question: "آبیاری کامل همیشه باعث افزایش عملکرد می‌شود.", answer: false },
            { question: "پتانسیل ماتریک خاک به بافت آن بستگی دارد.", answer: true },
            { question: "آبیاری نواری برای زمین‌های شیب‌دار مناسب است.", answer: false },
            { question: "مدیریت زمان آبیاری در مرحله رویشی مهم نیست.", answer: false },
            { question: "خاک اشباع شده هوا را نگه می‌دارد.", answer: false },
            { question: "آبیاری قطره‌ای هزینه نگهداری پایینی دارد.", answer: false },
            { question: "گیاهان هیدروفیت در شرایط خشک رشد خوبی دارند.", answer: false },
            { question: "راندمان انتقال آب در لوله‌ها از کانال‌های خاکی بیشتر است.", answer: true },
            { question: "آبیاری سطحی برای محصولات متراکم مناسب است.", answer: false },
            { question: "عوامل اقلیمی بر نیاز آبی گیاه تأثیر دارند.", answer: true },
            { question: "آب سهل الوصول برای گیاه غیرقابل دسترس است.", answer: false },
            { question: "آبیاری بارانی برای زمین‌های شیب‌دار مناسب است.", answer: true },
            { question: "خاک‌های رسی نفوذپذیری بالایی دارند.", answer: false },
            { question: "آبیاری قطره‌ای برای گیاهان حساس به آب ایستادگی مناسب است.", answer: true },
            { question: "نیاز آبی گیاه در همه مراحل یکسان است.", answer: false },
            { question: "کانال‌های خاکی راندمان بالایی دارند.", answer: false },
            { question: "آبیاری کرتی برای زمین‌های شیب‌دار مناسب است.", answer: false },
            { question: "آبیاری بارانی مصرف آب را افزایش می‌دهد.", answer: false },
            { question: "زروفیت‌ها برگ‌های بزرگی دارند.", answer: false },
            { question: "پتانسیل آب خاک به فشار جوی وابسته است.", answer: true },
            { question: "آبیاری نواری نیاز به تسطیح کمتری دارد.", answer: true },
            { question: "آبیاری کامل برای مناطق با کمبود آب مناسب است.", answer: false },
            { question: "خاک‌های شنی آب زیادی نگه می‌دارند.", answer: false },
            { question: "آبیاری قطره‌ای برای محصولات متراکم کارایی بالایی دارد.", answer: false },
            { question: "مدیریت آبیاری می‌تواند تنش خشکی را کاهش دهد.", answer: true },
            { question: "نقطه پژمردگی دائمی بالاتر از ظرفیت زراعی است.", answer: false }
        ];

        let currentIndex = 0;
        let phase = 'definitions'; // definitions, trueFalse, extraDefinitions, extraTrueFalse
        let questionIndex = 0;
        let timerInterval;
        const cardContainer = document.getElementById('card-container');
        const waterLevel = document.getElementById('water-level');
        const canvas = document.getElementById('confetti-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        function showCard() {
            if (phase === 'definitions' && currentIndex >= definitions.length) {
                phase = 'trueFalse';
                currentIndex = 0;
                questionIndex = 0;
            }
            if (phase === 'trueFalse' && questionIndex >= trueFalseQuestions.length) {
                phase = 'extraDefinitions';
                currentIndex = 0;
                questionIndex = 0;
            }
            if (phase === 'extraDefinitions' && currentIndex >= extraDefinitions.length) {
                phase = 'extraTrueFalse';
                currentIndex = 0;
                questionIndex = 0;
            }
            if (phase === 'extraTrueFalse' && questionIndex >= extraTrueFalseQuestions.length) {
                cardContainer.innerHTML = '<p class="text-center text-xl font-bold text-green-600">پایان! همه کارت‌ها و سوالات نمایش داده شد.</p>';
                waterLevel.style.display = 'none';
                return;
            }

            if (phase === 'definitions') {
                cardContainer.innerHTML = `
                    <div class="card p-6 text-center">
                        <h2 class="text-xl font-bold text-blue-800 mb-4">تعریف ${currentIndex + 1}</h2>
                        <p class="text-lg">${definitions[currentIndex]}</p>
                    </div>`;
                startTimer(30, () => {
                    launchConfetti();
                    setTimeout(() => {
                        currentIndex++;
                        showCard();
                    }, 3000);
                });
            } else if (phase === 'trueFalse') {
                const q = trueFalseQuestions[questionIndex];
                cardContainer.innerHTML = `
                    <div class="card p-6 text-center">
                        <h2 class="text-xl font-bold text-blue-800 mb-4">سوال صحیح/غلط ${questionIndex + 1}</h2>
                        <p class="text-lg mb-4">${q.question}</p>
                        <button onclick="checkTrueFalse(${questionIndex}, true)" class="bg-green-500 text-white px-4 py-2 rounded mx-2">صحیح</button>
                        <button onclick="checkTrueFalse(${questionIndex}, false)" class="bg-red-500 text-white px-4 py-2 rounded mx-2">غلط</button>
                        <p id="feedback-${questionIndex}" class="mt-4 text-lg hidden"></p>
                    </div>`;
                startTimer(5, () => {
                    launchConfetti();
                    setTimeout(() => {
                        questionIndex++;
                        showCard();
                    }, 3000);
                });
            } else if (phase === 'extraDefinitions') {
                cardContainer.innerHTML = `
                    <div class="card p-6 text-center">
                        <h2 class="text-xl font-bold text-blue-800 mb-4">تعریف اضافی ${currentIndex + 1}</h2>
                        <p class="text-lg">${extraDefinitions[currentIndex]}</p>
                    </div>`;
                startTimer(30, () => {
                    launchConfetti();
                    setTimeout(() => {
                        currentIndex++;
                        showCard();
                    }, 3000);
                });
            } else if (phase === 'extraTrueFalse') {
                const q = extraTrueFalseQuestions[questionIndex];
                cardContainer.innerHTML = `
                    <div class="card p-6 text-center">
                        <h2 class="text-xl font-bold text-blue-800 mb-4">سوال اضافی صحیح/غلط ${questionIndex + 1}</h2>
                        <p class="text-lg mb-4">${q.question}</p>
                        <button onclick="checkTrueFalse(${questionIndex}, true, 'extra')" class="bg-green-500 text-white px-4 py-2 rounded mx-2">صحیح</button>
                        <button onclick="checkTrueFalse(${questionIndex}, false, 'extra')" class="bg-red-500 text-white px-4 py-2 rounded mx-2">غلط</button>
                        <p id="feedback-${questionIndex}" class="mt-4 text-lg hidden"></p>
                    </div>`;
                startTimer(5, () => {
                    launchConfetti();
                    setTimeout(() => {
                        questionIndex++;
                        showCard();
                    }, 3000);
                });
            }
        }

        function startTimer(seconds, callback) {
            clearInterval(timerInterval);
            waterLevel.style.height = '100%';
            let timeLeft = seconds;
            let heightStep = 100 / timeLeft;
            timerInterval = setInterval(() => {
                timeLeft--;
                waterLevel.style.height = `${(timeLeft / seconds) * 100}%`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    callback();
                }
            }, 1000);
        }

        function checkTrueFalse(index, selected, type = 'normal') {
            const questions = type === 'normal' ? trueFalseQuestions : extraTrueFalseQuestions;
            const q = questions[index];
            const feedback = document.getElementById(`feedback-${index}`);
            if (selected === q.answer) {
                feedback.textContent = 'درست! 👍';
                feedback.classList.add('text-green-600');
            } else {
                feedback.textContent = `غلط! جواب درست: ${q.answer ? 'صحیح' : 'غلط'}`;
                feedback.classList.add('text-red-600');
            }
            feedback.classList.remove('hidden');
            document.querySelectorAll(`#card-container button`).forEach(btn => btn.disabled = true);
        }

        function launchConfetti() {
            const colors = ['#f00', '#0f0', '#00f', '#ff0', '#0ff', '#f0f'];
            let particles = [];
            for (let i = 0; i < 300; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    r: Math.random() * 4 + 1,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    vx: Math.random() * 20 - 10,
                    vy: Math.random() * 20 - 10,
                    life: 300
                });
            }
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => {
                    if (p.life > 0) {
                        ctx.beginPath();
                        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
                        ctx.fillStyle = p.color;
                        ctx.fill();
                        p.x += p.vx;
                        p.y += p.vy;
                        p.vy += 0.1;
                        p.life--;
                    }
                });
                if (particles.some(p => p.life > 0)) {
                    requestAnimationFrame(animate);
                } else {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                }
            }
            animate();
        }

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        showCard();
    </script>
</body>
</html>