<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>کارت‌های امتحانی: نظام‌های زراعی با زمان‌سنج ظرف آب</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            background: url('https://images.unsplash.com/photo-1500595046743-ee5a3a111d86?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80') no-repeat center center fixed;
            background-size: cover;
            font-family: 'Vazirmatn', sans-serif;
        }
        .card {
            transition: all 0.5s ease;
            opacity: 0;
            transform: translateY(20px);
        }
        .card.show {
            opacity: 1;
            transform: translateY(0);
        }
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2000;
            animation: slideIn 0.5s ease-out, slideOut 0.5s ease-in 2s forwards;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        @keyframes slideOut {
            from { transform: translateX(0); }
            to { transform: translateX(100%); }
        }
        .water-container {
            width: 50px;
            height: 100px;
            border: 2px solid #1e40af;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            background: #e0f7fa;
        }
        .water {
            width: 100%;
            height: 100%;
            background: linear-gradient(to top, #1e40af, #60a5fa);
            position: absolute;
            bottom: 0;
            animation: drain 20s linear forwards;
        }
        @keyframes drain {
            0% { height: 100%; background: linear-gradient(to top, #1e40af, #60a5fa); }
            100% { height: 0; background: linear-gradient(to top, #bfdbfe, #e0f7fa); }
        }
        @font-face {
            font-family: 'Vazirmatn';
            src: url('https://cdn.fontcdn.ir/Fonts/Vazirmatn/Vazirmatn-Regular.woff2') format('woff2');
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div class="bg-white bg-opacity-90 rounded-xl shadow-2xl p-6 max-w-3xl w-full border-4 border-yellow-500">
        <h1 class="text-3xl font-bold text-center text-green-700 mb-6">🌾 کارت‌های امتحانی: نظام‌های زراعی 🌾</h1>
        <div id="progress" class="text-center mb-4 text-lg text-gray-700"></div>
        <div class="flex justify-center mb-4">
            <div class="water-container">
                <div class="water"></div>
            </div>
        </div>
        <div id="card-container" class="bg-gradient-to-r from-green-200 to-green-400 p-6 rounded-lg border-2 border-green-500 card">
            <p id="card-text" class="text-lg text-center"></p>
        </div>
        <div class="mt-4 flex justify-center space-x-4">
            <button id="prev-card" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">قبلی</button>
            <button id="next-card" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">بعدی</button>
            <button id="reset-cards" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600">ریست</button>
        </div>
        <div id="toast-container"></div>
    </div>

    <script>
        const cards = [
            "نظام‌های زراعی را می‌توان از دیدگاه‌های مختلف مانند سنتی، صنعتی، کم‌نهاده و پرنهاده تقسیم‌بندی کرد.",
            "نظام‌های زراعی سنتی، بر اساس دانش بومی و نهاده‌های محلی و بوم‌سازگار اداره می‌شوند.",
            "کشاورزی زیستی (ارگانیک) بر اصول اکولوژیکی تولید محصولات بدون مصرف کود و سموم شیمیایی تاکید دارد.",
            "نظام‌های زراعی صنعتی، نهاده‌محور، پرهزینه و وابسته به نهاده‌های خارجی مانند کود شیمیایی، سموم و انرژی فسیلی هستند.",
            "کشاورزی متمرکز شامل حذف گیاهان خودرو، جلوگیری از تغذیه جانوران از محصولات و نگهداری دام در مکان‌های محافظت شده است.",
            "سیستم‌های زراعی شامل الگوی کشت، عملیات زراعی و تعامل آن‌ها با منابع، تجهیزات و فناوری‌های موجود است.",
            "انتخاب سیستم زراعی تحت تأثیر شرایط اکولوژیکی، اقتصادی، اجتماعی و سیاسی منطقه قرار دارد.",
            "هدف سیستم زراعی پایدار، استفاده بهینه و سودمند از منابع طبیعی به صورت پایدار است.",
            "الگوی کشت، تعیین نظام کشاورزی با مزیت اقتصادی پایدار بر اساس سیاست‌های کلان، دانش بومی و پتانسیل منطقه است.",
            "عوامل مؤثر بر انتخاب محصول و تناوب شامل عوامل اقتصادی، اجتماعی، خاک و اقلیم می‌باشند.",
            "برنامه‌ریزی کشت در سطح مزرعه به صورت آیش‌بندی و تناوب انجام می‌شود.",
            "آیش‌بندی یعنی در نظر گرفتن دوره‌ای برای استراحت زمین جهت بازسازی حاصلخیزی خاک.",
            "تناوب زراعی ترتیب متفاوت کاشت گیاهان در سال‌های متوالی است که به بهبود کیفیت خاک و کاهش آفات کمک می‌کند.",
            "حضور تناوب مناسب در کاهش نیاز به استفاده از آفتکش‌ها مؤثر است.",
            "انتخاب تناوب مناسب به قوانین دولتی، شرایط اکولوژیکی، توپوگرافی و وضعیت بازار بستگی دارد.",
            "حبوبات در تناوب بهتر است بین دو گیاه غلات دانه‌ریز قرار گیرند چون به تثبیت ازت کمک می‌کنند.",
            "گیاهان علوفه‌ای چندساله معمولاً در ابتدای تناوب قرار می‌گیرند.",
            "در تناوب باید از تکرار پشت سرهم گیاهان مشابه خودداری شود.",
            "تنظیم جدول تناوبی به صورت مربع، تعداد سال‌های اجرای تناوب مساوی با تعداد قطعات زمین است.",
            "رعایت فاصله زمانی مناسب بین برداشت محصول و کاشت محصول بعدی ضروری است.",
            "مدیریت منابع آبی و خاکی از اصول مهم پایداری سیستم‌های کشاورزی است.",
            "نوسانات قیمت محصولات کشاورزی مشکلاتی برای کشاورزان و برنامه‌ریزی کشت ایجاد می‌کند.",
            "کاهش حاصلخیزی خاک و خشکسالی از چالش‌های مهم کشاورزی در ایران است.",
            "افزایش بهره‌وری و حفظ منابع پایه، اهداف اصلی توسعه نظام‌های کشاورزی پایدار است.",
            "تغییر اقلیم می‌تواند بر الگوی کشت و تناوب اثر منفی بگذارد.",
            "دانش بومی کشاورزان نقش کلیدی در انتخاب و اجرای الگوی کشت دارد.",
            "استفاده از فناوری‌های نوین در کشاورزی موجب افزایش بهره‌وری و کاهش هزینه‌ها می‌شود.",
            "سیستم‌های زراعی رایج در ایران شامل نظام‌های کشاورزی کم‌نهاده و پرنهاده است.",
            "کشاورزی ارگانیک محصول سالم با کیفیت بالا تولید می‌کند ولی نیازمند مقررات و استانداردهای خاص است.",
            "تناوب صحیح برای بهبود حاصلخیزی خاک و کاهش آفات اهمیت دارد.",
            "سیستم‌های زراعی صنعتی برای تولید تجاری و انبوه به نهاده‌های پرهزینه وابسته هستند.",
            "تنوع زیستی در کشاورزی پایدار از اهمیت زیادی برخوردار است.",
            "سیستم‌های کشاورزی سنتی بیشتر در جوامع بومی و روستایی مطرح است.",
            "حذف گیاهان خودرو و محافظت از محصولات کشاورزی، بهره‌وری زمین را افزایش می‌دهد.",
            "استفاده بهینه از نهاده‌ها و نیروی کار در بهبود عملکرد کشاورزی موثر است.",
            "بررسی شرایط اقلیمی و خاکی منطقه در انتخاب محصولات کشاورزی ضروری است.",
            "وجود اطلاعات دقیق و بانک اطلاعاتی جامع برای برنامه‌ریزی کشت اهمیت دارد.",
            "تنظیم مناسب تناوب باعث کاهش هزینه‌های حمل و نقل و افزایش اشتغال می‌شود.",
            "آیش به عنوان راهکاری برای بازسازی خاک در تناوب و افزایش عملکرد محصول کاربرد دارد.",
            "توسعه صنایع تبدیلی مرتبط با کشاورزی در ارتقای بهره‌وری بخش کشاورزی نقش مهمی دارد."
        ];

        let currentCard = 0;
        let timer;
        const cardDuration = 20000; // 20 ثانیه
        const clickSound = new Audio('https://cdn.pixabay.com/audio/2023/08/08/audio_3f6b7b2c4b.mp3');
        const transitionSound = new Audio('https://cdn.pixabay.com/audio/2023/08/08/audio_4e7b2b3c5c.mp3');

        // مدیریت خطای localStorage
        try {
            currentCard = parseInt(localStorage.getItem('currentCard')) || 0;
        } catch (e) {
            console.error('خطا در دسترسی به localStorage:', e);
            currentCard = 0;
        }

        function showToast(message, type) {
            const toast = `<div class="toast bg-${type === 'error' ? 'red' : 'green'}-500 text-white p-3 rounded-lg shadow-lg">${message}</div>`;
            $('#toast-container').append(toast);
            setTimeout(() => $('#toast-container .toast').first().remove(), 2500);
        }

        function resetWaterAnimation() {
            $('.water').remove();
            $('.water-container').append('<div class="water"></div>');
        }

        function showCard(index) {
            if (index < 0) {
                index = cards.length - 1;
                showToast('به آخرین کارت رسیدید، بازگشت به ابتدا!', 'success');
            } else if (index >= cards.length) {
                index = 0;
                showToast('همه کارت‌ها نمایش داده شدند، بازگشت به ابتدا!', 'success');
            }
            currentCard = index;
            try {
                localStorage.setItem('currentCard', currentCard);
            } catch (e) {
                console.error('خطا در ذخیره localStorage:', e);
            }
            $('#card-container').removeClass('show');
            resetWaterAnimation();
            setTimeout(() => {
                $('#card-text').text(cards[currentCard]);
                $('#card-container').addClass('show');
                $('#progress').text(`کارت ${currentCard + 1} از ${cards.length}`);
            }, 500);
            clearTimeout(timer);
            timer = setTimeout(() => {
                transitionSound.play().catch(e => console.error('خطا در پخش صدا:', e));
                showCard(currentCard + 1);
            }, cardDuration);
        }

        $('#next-card').on('click', () => {
            clickSound.play().catch(e => console.error('خطا در پخش صدا:', e));
            clearTimeout(timer);
            showCard(currentCard + 1);
        });

        $('#prev-card').on('click', () => {
            clickSound.play().catch(e => console.error('خطا در پخش صدا:', e));
            clearTimeout(timer);
            showCard(currentCard - 1);
        });

        $('#reset-cards').on('click', () => {
            clickSound.play().catch(e => console.error('خطا در پخش صدا:', e));
            clearTimeout(timer);
            showToast('کارت‌ها ریست شدند!', 'success');
            showCard(0);
        });

        // شروع با کارت ذخیره‌شده یا اولین کارت
        showCard(currentCard);
    </script>
</body>
</html>